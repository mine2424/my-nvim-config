# プロジェクトタスク

my-nvim-configプロジェクトの開発タスクを管理するドキュメントです。

## 高優先度タスク

### 1. setup.shのデフォルト動作変更
**ステータス**: 未着手  
**説明**: 引数なしで実行した場合、config-onlyモードをデフォルトにする
- 現在の動作: ツールのインストールを含むフルセットアップ
- 期待する動作: 設定ファイルのコピーのみ（--config-onlyと同じ）
- 理由: より安全なデフォルト動作、フルインストールは明示的に指定

### 2. MCP設定の動的ローカル環境適応
**ステータス**: 未着手  
**説明**: 異なるローカル環境に適応するインテリジェントなMCP（Model Context Protocol）設定の実装
- インストール済みMCPサーバーとその場所を検出
- 異なるインストール方法（npm、homebrew、手動）をサポート
- クロスプラットフォーム対応（macOS、Linux）
- サーバー不在時のフォールバック機構

## 中優先度タスク

### 3. MCP環境検出ロジックの作成
**ステータス**: 未着手  
**説明**: MCPサーバーパスの堅牢な検出システムを構築
- 一般的なインストールディレクトリをチェック
- 実行権限を確認
- ユーザー固有のインストールをサポート
- 仮想環境への対応

### 4. MCPサーバーバイナリ検証の追加
**ステータス**: 未着手  
**説明**: MCPサーバーが適切にインストールされていることを確認する検証ステップ
- 設定前に必要なバイナリをチェック
- 依存関係不足時の明確なエラーメッセージ
- 不足サーバーのインストールコマンド提案

### 5. MCPの自動パス解決実装
**ステータス**: 未着手  
**説明**: OSとインストール方法に基づくスマートなパス解決
- npmグローバルインストール: `~/.npm/bin`、`/usr/local/bin`
- Homebrewインストール: `/opt/homebrew/bin`、`/usr/local/bin`
- 手動インストール: `$PATH`をチェック
- Windows対応（必要に応じて）

### 6. エラーハンドリングとフォールバック
**ステータス**: 未着手  
**説明**: MCP設定の包括的なエラーハンドリング追加
- サーバー不在時の優雅な機能低下
- 実行可能な解決策を含む明確なエラーメッセージ
- デバッグ用のロギング
- リカバリーメカニズム

### 7. MCPテンプレート設定システム
**ステータス**: 未着手  
**説明**: 環境変数を使用したテンプレートベースの設定作成
- 動的パス用のプレースホルダー使用
- 環境変数展開のサポート
- 環境経由でのユーザーオーバーライド許可
- テンプレート検証

### 9. MCPサーバー利用可能性チェック
**ステータス**: 未着手  
**説明**: 設定前の利用可能性チェックの実装
- サーバー接続性テスト
- 必要な権限の確認
- 競合プロセスのチェック
- サーバーバージョンの検証

## 低優先度タスク

### 8. ドキュメント更新
**ステータス**: 完了  
**説明**: 新しいsetup.sh動作を反映した全ドキュメントの更新
- README.mdの更新 ✓
- CLAUDE.mdの更新 ✓
- 既存ユーザー向け移行ガイドの追加 ✓
- 新しい設定オプションのドキュメント化 ✓

### 10. ユーザー固有のMCPオーバーライド
**ステータス**: 未着手  
**説明**: ユーザーがMCP設定をオーバーライドできる機能
- `~/.mcp-override.json`のサポート
- デフォルトとユーザー設定のマージ
- ユーザー設定の検証
- オーバーライドオプションのドキュメント

## 実装メモ

### setup.shの変更
デフォルト動作の変更は後方互換性を維持する必要があります：
```bash
# 旧動作
./setup.sh          # フルセットアップ
./setup.sh config-only  # 設定のみ

# 新動作
./setup.sh          # 設定のみ（より安全なデフォルト）
./setup.sh --full   # インストールを含むフルセットアップ
./setup.sh --config-only  # 明示的な設定のみ（引数なしと同じ）
```

### MCP適応戦略
1. **検出フェーズ**: インストール済みMCPサーバーをスキャン
2. **解決フェーズ**: 各サーバーの正しいパスを決定
3. **設定フェーズ**: 適切な設定ファイルを生成
4. **検証フェーズ**: 設定をテスト
5. **フォールバックフェーズ**: 不足/破損サーバーの処理

### 環境変数
MCP設定用の提案環境変数：
- `MCP_GITHUB_PATH`: GitHub MCPサーバーパスのオーバーライド
- `MCP_CONTEXT7_PATH`: Context7 MCPサーバーパスのオーバーライド
- `MCP_PLAYWRIGHT_PATH`: Playwright MCPサーバーパスのオーバーライド
- `MCP_DEBUG_THINKING_PATH`: Debug Thinking MCPサーバーパスのオーバーライド
- `MCP_CONFIG_DIR`: MCP設定ディレクトリのオーバーライド

## 進捗管理

タスクのステータス：
- **未着手**: 開始前
- **進行中**: 現在作業中
- **完了**: 完成しテスト済み
- **ブロック**: 依存関係や決定待ち

## 次のステップ

1. タスク#1（setup.sh修正）から開始（最も単純）
2. タスク#2（MCP適応）に移行（最も複雑）
3. タスク#3-7と#9はタスク#2をサポート、並行作業可能
4. タスク#8と#10はメイン実装後に実施